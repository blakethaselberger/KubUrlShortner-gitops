apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization


namePrefix: dev-

commonLabels:
  environment: dev

replicas:
- count: 1
  name: url-shortener

patchesStrategicMerge:
- deployment.yaml

configMapGenerator:
- behavior: merge
  literals:
  - database_host=dev-postgres
  - redis_host=dev-redis
  - database_url="postgresql://user:password@dev-postgres:5432/urldb"
  name: url-shortener-config
resources:
- ../../base
images:
- name: analytics-worker
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/analytics-worker
  newTag: ee28a82aa84043ca6866d2950312dc02c5fbd7f5
- name: cleanup-worker
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/cleanup-worker
  newTag: ee28a82aa84043ca6866d2950312dc02c5fbd7f5
- name: migrations-worker
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/migrations-worker
  newTag: ee28a82aa84043ca6866d2950312dc02c5fbd7f5
- name: schema-init-worker
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/schema-init-worker
  newTag: ee28a82aa84043ca6866d2950312dc02c5fbd7f5
- name: url-shortener
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/url-shortener
  newTag: ee28a82aa84043ca6866d2950312dc02c5fbd7f5
