apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization


namePrefix: dev-

commonLabels:
  environment: dev

replicas:
- count: 1
  name: url-shortener

patchesStrategicMerge:
- deployment.yaml

configMapGenerator:
- behavior: merge
  literals:
  - database_host=dev-postgres
  - redis_host=dev-redis
  - database_url="postgresql://user:password@dev-postgres:5432/urldb"
  name: url-shortener-config
resources:
- ../../base
images:
- name: url-shortener
  newName: 211125541816.dkr.ecr.us-west-2.amazonaws.com/url-shortener
  newTag: 484de85a8da0b52ba30893869dc2ff8884f3295a
